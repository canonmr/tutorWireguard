<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial Wireguard Site-to-Site Lengkap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 1.5rem;
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
        }
        .step-card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .step-header {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
            padding-top: 1rem;
        }
        .step-content.active {
            max-height: 5000px; /* Adjusted for full content */
            transition: max-height 0.7s ease-in;
        }
        .code-block {
            background-color: #1f2937;
            color: #e5e7eb;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            overflow-x: auto;
            position: relative;
        }
        .code-block h4 {
            font-weight: 600;
            color: #9ca3af;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #4b5563;
            padding-bottom: 0.5rem;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #4b5563;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.75rem;
        }
        .copy-btn:hover {
            background-color: #6b7280;
        }
        .chart-container {
            width: 100%;
            height: 300px;
            margin-top: 1.5rem;
            background-color: #f9fafb;
            border-radius: 0.75rem;
            padding: 1rem;
        }
        .diagram-container {
            position: relative;
            width: 100%;
            height: 400px;
            background-color: #f9fafb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-top: 1.5rem;
        }
        .diagram-container svg {
            overflow: visible;
        }
        .tab-group {
            background-color: #f9fafb;
            border-radius: 1rem;
            border: 1px solid #e5e7eb;
            padding: 1.5rem;
        }
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .tab-button {
            padding: 0.5rem 1.25rem;
            border-radius: 9999px;
            background-color: #e5e7eb;
            color: #374151;
            font-weight: 600;
            transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }
        .tab-button:hover {
            background-color: #d1d5db;
        }
        .tab-button.active {
            background-color: #3b82f6;
            color: #ffffff;
            box-shadow: 0 12px 25px -10px rgba(59, 130, 246, 0.6);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .info-card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px -15px rgba(15, 23, 42, 0.25);
            padding: 1.25rem;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="bg-blue-600 text-white py-12">
        <div class="container text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 animate-fade-in">Panduan Lengkap: Membangun Site-to-Site VPN dengan Wireguard dan Mikrotik</h1>
            <p class="text-xl md:text-2xl font-light opacity-90 animate-fade-in-up">Tutorial Interaktif dengan Visualisasi & Kode yang Dapat Disalin</p>
        </div>
    </div>

    <div class="container mt-8">

        <!-- Pengenalan -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('intro')">
                <span class="font-bold text-blue-600">1. Pengenalan Wireguard dan Manfaatnya</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-intro">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-intro">
                <p class="mb-4">Wireguard adalah protokol VPN modern yang dirancang untuk menjadi sederhana, cepat, dan aman. Keunggulannya meliputi **performance superior**, **konfigurasi yang sederhana**, dan **cryptography modern**.</p>
                <div class="diagram-container">
                    <h4 class="font-semibold mb-4 text-center text-lg">Perbandingan Wireguard vs. VPN Tradisional</h4>
                    <svg id="vpn-comparison" width="100%" height="100%" viewBox="0 0 800 300"></svg>
                </div>
                <div class="mt-4 prose max-w-none">
                    <h3>Apa Itu Wireguard?</h3>
                    <p>Wireguard adalah protokol VPN modern yang dirancang untuk menjadi sederhana, cepat, dan aman. Dikembangkan sebagai alternatif yang lebih efisien dibanding protokol VPN tradisional seperti IPSec atau OpenVPN, Wireguard menggunakan kriptografi modern dengan overhead yang minimal.</p>
                    <h3>Mengapa Diperlukan?</h3>
                    <p>Dalam era digital saat ini, banyak organisasi memiliki multiple lokasi yang memerlukan konektivitas aman antar-jaringan. Tantangan umum yang dihadapi:</p>
                    <ul class="list-disc ml-6">
                        <li><strong>Keterbatasan IP Publik</strong>: Provider internet residential (seperti Indihome) tidak menyediakan IP publik static</li>
                        <li><strong>Biaya Dedicated Line</strong>: Koneksi MPLS atau dedicated line memiliki biaya tinggi</li>
                        <li><strong>Keamanan Internet</strong>: Traffic antar-lokasi melalui internet publik memerlukan enkripsi</li>
                        <li><strong>Kompleksitas Konfigurasi</strong>: Protokol VPN tradisional memerlukan setup yang rumit</li>
                        <li><strong>Maintenance Overhead</strong>: Solusi proprietary memerlukan maintenance khusus</li>
                    </ul>
                    <div class="mt-6 bg-blue-50 border border-blue-100 rounded-xl p-5 shadow-sm">
                        <div class="flex items-start gap-3">
                            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-blue-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.75a.75.75 0 00-1.5 0v3.5c0 .414.336.75.75.75h2.5a.75.75 0 000-1.5H10.75V6.25z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <p class="text-gray-700 text-base leading-relaxed">Bayangkan Wireguard seperti jalur tol privat yang dibangun di atas jalan raya publik. Ia memotong kemacetan konfigurasi VPN tradisional dengan rute yang lebih lurus, sehingga data antar-kantor melaju cepat tanpa mengorbankan keamanan.</p>
                        </div>
                    </div>
                    <div class="mt-8 grid gap-6 md:grid-cols-3">
                        <div class="rounded-xl border border-slate-200 bg-white/80 p-5 shadow-sm">
                            <h4 class="mb-3 flex items-center gap-2 text-lg font-semibold text-blue-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
                                </svg>
                                Manfaat Wireguard untuk Site-to-Site VPN
                            </h4>
                            <ul class="list-disc space-y-2 pl-5 text-sm text-gray-700">
                                <li><strong>Throughput tinggi</strong> dengan penggunaan CPU minimal sehingga koneksi antar-site tetap responsif.</li>
                                <li><strong>Konfigurasi sederhana</strong>; cukup beberapa baris file konfigurasi untuk membangun terowongan.</li>
                                <li><strong>Kriptografi modern</strong> seperti ChaCha20 dan Poly1305 menjaga kerahasiaan data.</li>
                                <li><strong>Dukungan roaming</strong> memastikan terowongan tetap hidup saat IP berubah.</li>
                            </ul>
                        </div>
                        <div class="rounded-xl border border-slate-200 bg-white/80 p-5 shadow-sm">
                            <h4 class="mb-3 flex items-center gap-2 text-lg font-semibold text-emerald-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 7.5l4.5 4.5L3 16.5m6-9l4.5 4.5L9 16.5m6-9l4.5 4.5L15 16.5" />
                                </svg>
                                Potensi Manfaat Implementasi
                            </h4>
                            <ul class="list-disc space-y-2 pl-5 text-sm text-gray-700">
                                <li><strong>Unified network</strong> yang membuat tiap cabang terasa seperti satu LAN besar.</li>
                                <li><strong>Akses terpusat</strong> untuk file server, database, dan aplikasi internal dari mana saja.</li>
                                <li><strong>Dukungan remote work</strong> dan replikasi data antar-lokasi untuk skenario pemulihan bencana.</li>
                                <li><strong>Efisiensi biaya</strong> karena memanfaatkan koneksi internet existing dan VPS terjangkau.</li>
                            </ul>
                        </div>
                        <div class="rounded-xl border border-slate-200 bg-white/80 p-5 shadow-sm">
                            <h4 class="mb-3 flex items-center gap-2 text-lg font-semibold text-amber-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0 3.75h.008v.008H12v-.008zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Kendala yang Dijembatani Wireguard
                            </h4>
                            <ul class="list-disc space-y-2 pl-5 text-sm text-gray-700">
                                <li><strong>NAT traversal</strong> diatasi dengan memanfaatkan VPS sebagai titik temu UDP.</li>
                                <li><strong>Dynamic IP</strong> tidak lagi jadi masalah berkat kemampuan endpoint discovery otomatis.</li>
                                <li><strong>Firewall kompleks</strong> disederhanakan karena hanya butuh satu port UDP 51820.</li>
                                <li><strong>Bottleneck performa</strong> berkurang dengan implementasi kernel-space dan overhead minimal.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Perencanaan Jaringan -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('planning')">
                <span class="font-bold text-blue-600">2. Persiapan dan Perencanaan Jaringan</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-planning">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-planning">
                <p class="mb-4">Tahap ini penting untuk memastikan tidak ada konflik IP dan koneksi dapat terhubung dengan baik.</p>
                <div class="diagram-container">
                    <h4 class="font-semibold mb-4 text-center text-lg">Diagram Topologi VPN Site-to-Site</h4>
                    <svg id="network-topology" width="100%" height="100%" viewBox="0 0 800 400"></svg>
                </div>
                <div class="mt-4 prose max-w-none">
                    <h3>Langkah 1: Inventarisasi Hardware Existing</h3>
                    <h4>A. Survey Mikrotik di Setiap Lokasi</h4>
                    <p><strong>Informasi yang Harus Dikumpulkan:</strong> Model, versi RouterOS (harus v7.x), CPU, RAM, interface, dan konfigurasi IP saat ini.</p>
                    <div class="code-block">
                        <h4>Command untuk Inventarisasi di Mikrotik</h4>
                        <pre><code><span id="code-mikrotik-inventory">/system resource print
/system package print
/interface print
/ip address print
/ip route print
/ip dhcp-server print
/ip firewall filter print</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-mikrotik-inventory')">Salin</button>
                    </div>
                    <h4>B. Survey Router ISP di Setiap Lokasi</h4>
                    <p>Informasi yang diperlukan: Brand/Model, IP WAN, DHCP Range, dan Port Forwarding.</p>
                    <div class="code-block">
                        <h4>Cara Mengakses Router ISP</h4>
                        <pre><code><span id="code-isp-router"># Cek gateway default
ipconfig /all    # Windows
ip route show    # Linux</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-isp-router')">Salin</button>
                    </div>
                    <h3>Langkah 2: Inventarisasi VPS/Cloud Server</h3>
                    <p>Pastikan VPS Anda memenuhi persyaratan minimum dan memiliki port yang diperlukan terbuka.</p>
                    <h3>Langkah 3: Planning IP Address Scheme</h3>
                    <p>Rencanakan subnet untuk jaringan Wireguard dan jaringan lokal di setiap lokasi untuk menghindari konflik.</p>
                    <h3>Langkah 4: Dokumentasi Pre-Implementation</h3>
                    <p>Buat diagram jaringan, checklist implementasi, dan rencana rollback untuk mempersiapkan diri.</p>
                </div>
            </div>
        </div>

        <!-- Setup VPS -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('vps-setup')">
                <span class="font-bold text-blue-600">3. Setup VPS Wireguard (wg-easy)</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-vps-setup">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-vps-setup">
                <p class="mb-4">Instalasi Docker dan wg-easy untuk manajemen server Wireguard yang mudah.</p>
                <div class="prose max-w-none">
                    <h3>Langkah 1: Persiapan VPS</h3>
                    <h4>A. Initial Server Setup</h4>
                    <div class="code-block">
                        <h4>Command Instalasi dan Keamanan</h4>
                        <pre><code><span id="code-vps-initial">apt update && apt upgrade -y
apt install -y curl wget htop nano ufw fail2ban
ufw allow ssh
ufw allow 51820/udp
ufw allow 51821/tcp
ufw --force enable</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-vps-initial')">Salin</button>
                    </div>
                    <h4>B. Docker Installation</h4>
                    <div class="code-block">
                        <h4>Command Instalasi Docker</h4>
                        <pre><code><span id="code-docker-install">curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-docker-install')">Salin</button>
                    </div>
                    <h3>Langkah 2: Konfigurasi wg-easy</h3>
                    <div class="code-block">
                        <h4>A. Docker Compose Configuration</h4>
                        <pre><code><span id="code-vps-setup">version: '3.8'

services:
  wg-easy:
    environment:
      - WG_HOST=your-domain.com
      - PASSWORD=YourSecurePassword123!
      - WG_PORT=51820
      - WG_DEFAULT_ADDRESS=10.8.0.x
    image: ghcr.io/wg-easy/wg-easy:15
    container_name: wg-easy
    ports:
      - "51820:51820/udp"
      - "51821:51821/tcp"
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    sysctls:
      - net.ipv4.ip_forward=1</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-vps-setup')">Salin</button>
                    </div>
                    <h3>Langkah 3: Deployment dan Testing</h3>
                    <div class="code-block">
                        <h4>Command untuk Deployment</h4>
                        <pre><code><span id="code-vps-deploy">cd /opt/wireguard
docker-compose up -d
docker-compose ps
docker-compose logs -f</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-vps-deploy')">Salin</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Konfigurasi Client & Mikrotik -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('mikrotik-config')">
                <span class="font-bold text-blue-600">4. Konfigurasi Client & Mikrotik</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-mikrotik-config">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-mikrotik-config">
                <p class="mb-6 text-gray-700">Gunakan panduan ini untuk menyelaraskan konfigurasi client di wg-easy dengan dua perangkat Mikrotik sehingga kedua lokasi dapat saling berkomunikasi secara aman.</p>
                <div class="tab-group" data-tab-group="mikrotik">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="client">Konfigurasi Client di wg-easy</button>
                        <button class="tab-button" data-tab="lokasi1">Konfigurasi Mikrotik Lokasi Pertama</button>
                        <button class="tab-button" data-tab="lokasi2">Konfigurasi Mikrotik Lokasi Kedua</button>
                    </div>

                    <div class="tab-content active space-y-8" data-tab-content="client" id="tab-client">
                        <div>
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 1: Akses Dashboard wg-easy</h3>
                            <ol class="list-decimal ml-6 space-y-2 text-gray-700">
                                <li>Buka <code>http://[VPS_IP]:51821</code> di browser Anda.</li>
                                <li>Masukkan password administrator yang didefinisikan pada <code>docker-compose.yml</code>.</li>
                                <li>Pastikan dashboard menampilkan interface <strong>wg0</strong> dengan daftar client kosong atau sesuai kebutuhan.</li>
                            </ol>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 2: Membuat Client untuk Tiap Lokasi</h3>
                            <div class="grid gap-6 md:grid-cols-2">
                                <div class="info-card">
                                    <h4 class="text-lg font-semibold text-gray-800 mb-2">Client Lokasi Pertama</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Klik tombol <strong>Add Client</strong>.</li>
                                        <li>Isi nama <strong>Lokasi-Utama</strong>; IP akan otomatis diberikan (umumnya <code>10.8.0.2</code>).</li>
                                        <li>Tekan <strong>Create</strong> dan pastikan client muncul di daftar.</li>
                                    </ol>
                                </div>
                                <div class="info-card">
                                    <h4 class="text-lg font-semibold text-gray-800 mb-2">Client Lokasi Kedua</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Pilih <strong>Add Client</strong> sekali lagi.</li>
                                        <li>Masukkan nama <strong>Lokasi-Cabang</strong>; IP biasanya <code>10.8.0.4</code>.</li>
                                        <li>Tekan <strong>Create</strong> untuk menyimpan client kedua.</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 3: Atur Allowed IPs</h3>
                            <p class="text-gray-700 mb-4">Edit masing-masing client dan ikuti daftar bertahap berikut untuk memastikan rute site-to-site tersusun dengan benar.</p>
                            <div class="grid gap-6 md:grid-cols-2">
                                <div class="info-card space-y-4">
                                    <h4 class="text-lg font-semibold text-blue-600">Client Lokasi-Utama</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Klik ikon <strong>Edit</strong> (pensil).</li>
                                        <li>Pada <strong>Allowed IPs</strong>, isi nilai berikut.</li>
                                        <li>Di bagian <strong>Server Allowed IPs</strong>, masukkan subnet LAN lokasi utama.</li>
                                        <li>Pilih <strong>Save</strong> untuk menyimpan perubahan.</li>
                                    </ol>
                                    <div class="grid gap-3 md:grid-cols-2">
                                        <div class="code-block">
                                            <h4>Allowed IPs</h4>
                                            <pre><code><span id="code-allowed-lokasi1">10.8.0.0/24</span></code></pre>
                                            <button class="copy-btn" onclick="copyCode('code-allowed-lokasi1')">Salin</button>
                                        </div>
                                        <div class="code-block">
                                            <h4>Server Allowed IPs</h4>
                                            <pre><code><span id="code-server-allowed-lokasi1">192.168.110.0/24</span></code></pre>
                                            <button class="copy-btn" onclick="copyCode('code-server-allowed-lokasi1')">Salin</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="info-card space-y-4">
                                    <h4 class="text-lg font-semibold text-blue-600">Client Lokasi-Cabang</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Klik ikon <strong>Edit</strong> pada client.</li>
                                        <li>Isi <strong>Allowed IPs</strong> dengan network Wireguard.</li>
                                        <li>Set <strong>Server Allowed IPs</strong> ke subnet LAN lokasi cabang.</li>
                                        <li>Simpan perubahan dengan menekan <strong>Save</strong>.</li>
                                    </ol>
                                    <div class="grid gap-3 md:grid-cols-2">
                                        <div class="code-block">
                                            <h4>Allowed IPs</h4>
                                            <pre><code><span id="code-allowed-lokasi2">10.8.0.0/24</span></code></pre>
                                            <button class="copy-btn" onclick="copyCode('code-allowed-lokasi2')">Salin</button>
                                        </div>
                                        <div class="code-block">
                                            <h4>Server Allowed IPs</h4>
                                            <pre><code><span id="code-server-allowed-lokasi2">192.168.113.0/24</span></code></pre>
                                            <button class="copy-btn" onclick="copyCode('code-server-allowed-lokasi2')">Salin</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 4: Unduh dan Audit Konfigurasi</h3>
                            <div class="grid gap-6 md:grid-cols-2">
                                <div class="info-card space-y-3">
                                    <h4 class="text-lg font-semibold text-gray-800">Config Lokasi Pertama</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Klik ikon <strong>Download</strong> pada client <strong>Lokasi-Utama</strong>.</li>
                                        <li>Simpan sebagai <code>lokasi-utama.conf</code> dan catat nilai penting berikut.</li>
                                    </ol>
                                    <div class="code-block">
                                        <h4>Potongan Konfigurasi</h4>
                                        <pre><code><span id="code-config-lokasi1">[Interface]
PrivateKey = [PRIVATE_KEY_LOKASI_UTAMA]
Address = 10.8.0.2/24

[Peer]
PublicKey = [SERVER_PUBLIC_KEY]
PresharedKey = [PRESHARED_KEY_LOKASI_UTAMA]
Endpoint = your-domain.com:51820
AllowedIPs = 10.8.0.0/24, 192.168.113.0/24</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-config-lokasi1')">Salin</button>
                                    </div>
                                </div>
                                <div class="info-card space-y-3">
                                    <h4 class="text-lg font-semibold text-gray-800">Config Lokasi Kedua</h4>
                                    <ol class="list-decimal ml-6 space-y-2 text-sm text-gray-700">
                                        <li>Download client <strong>Lokasi-Cabang</strong> sebagai <code>lokasi-cabang.conf</code>.</li>
                                        <li>Pastikan detail berikut tersimpan.</li>
                                    </ol>
                                    <div class="code-block">
                                        <h4>Potongan Konfigurasi</h4>
                                        <pre><code><span id="code-config-lokasi2">[Interface]
PrivateKey = [PRIVATE_KEY_LOKASI_CABANG]
Address = 10.8.0.4/24

[Peer]
PublicKey = [SERVER_PUBLIC_KEY]
PresharedKey = [PRESHARED_KEY_LOKASI_CABANG]
Endpoint = your-domain.com:51820
AllowedIPs = 10.8.0.0/24, 192.168.110.0/24</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-config-lokasi2')">Salin</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 5: Verifikasi dari VPS</h3>
                            <p class="text-gray-700 mb-3">Gunakan perintah berikut untuk memastikan kedua client tercatat dan Allowed IPs sudah benar.</p>
                            <div class="code-block">
                                <h4>Verifikasi Peer di wg-easy</h4>
                                <pre><code><span id="code-wg-show">docker exec wg-easy wg show

# Output yang diharapkan:
# peer: [PUBLIC_KEY_LOKASI_UTAMA]
#   allowed ips: 10.8.0.2/32, 192.168.110.0/24
# peer: [PUBLIC_KEY_LOKASI_CABANG]
#   allowed ips: 10.8.0.4/32, 192.168.113.0/24</span></code></pre>
                                <button class="copy-btn" onclick="copyCode('code-wg-show')">Salin</button>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content space-y-8" data-tab-content="lokasi1" id="tab-lokasi1">
                        <div class="space-y-6 text-gray-700">
                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 1: Backup &amp; Validasi Router</h3>
                                <p class="mb-3">Sebelum melakukan perubahan, backup konfigurasi existing dan cek kesiapan perangkat.</p>
                                <div class="code-block mb-4">
                                    <h4>Backup Konfigurasi</h4>
                                    <pre><code><span id="code-backup-lokasi1">/export file=backup-pre-wireguard-lokasi1
/certificate export-certificate numbers=0,1,2,3</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-backup-lokasi1')">Salin</button>
                                </div>
                                <div class="code-block">
                                    <h4>Verifikasi Sistem</h4>
                                    <pre><code><span id="code-verify-sistem-lokasi1">/system resource print
/interface print
/ip route print</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-verify-sistem-lokasi1')">Salin</button>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 2: Buat Interface Wireguard</h3>
                                <ol class="list-decimal ml-6 space-y-2">
                                    <li>Tambahkan interface Wireguard baru dengan private key dari file <code>lokasi-utama.conf</code>.</li>
                                    <li>Assign IP <code>10.8.0.2/24</code> ke interface tersebut.</li>
                                    <li>Verifikasi interface dan IP sudah aktif.</li>
                                </ol>
                                <div class="grid gap-4 md:grid-cols-3 mt-4">
                                    <div class="code-block">
                                        <h4>Tambah Interface</h4>
                                        <pre><code><span id="code-interface-lokasi1">/interface wireguard add listen-port=51820 mtu=1420 name=wg-site2site private-key="[PRIVATE_KEY_DARI_CONFIG_LOKASI_UTAMA]"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-interface-lokasi1')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Assign IP</h4>
                                        <pre><code><span id="code-ip-lokasi1">/ip address add address=10.8.0.2/24 interface=wg-site2site comment="Wireguard-Site2Site-IP"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-ip-lokasi1')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Verifikasi</h4>
                                        <pre><code><span id="code-verify-interface-lokasi1">/interface wireguard print
/ip address print where interface=wg-site2site</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-verify-interface-lokasi1')">Salin</button>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 3: Tambahkan Peer ke VPS</h3>
                                <p class="mb-3">Gunakan public key VPS dan preshared key dari konfigurasi wg-easy.</p>
                                <div class="code-block">
                                    <h4>Konfigurasi Peer</h4>
                                    <pre><code><span id="code-peer-lokasi1">/interface wireguard peers add allowed-address=0.0.0.0/0,::/0 endpoint-address=your-domain.com endpoint-port=51820 interface=wg-site2site public-key="[SERVER_PUBLIC_KEY]" preshared-key="[PRESHARED_KEY_LOKASI_UTAMA]" persistent-keepalive=25s comment="VPS-Server"</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-peer-lokasi1')">Salin</button>
                                </div>
                                <div class="code-block mt-4">
                                    <h4>Verifikasi Peer</h4>
                                    <pre><code><span id="code-verify-peer-lokasi1">/interface wireguard peers print detail</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-verify-peer-lokasi1')">Salin</button>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 4: Routing</h3>
                                <ol class="list-decimal ml-6 space-y-2">
                                    <li>Buat rute ke subnet lokasi cabang.</li>
                                    <li>Tambahkan rute ke network manajemen Wireguard.</li>
                                    <li>Pastikan tabel routing sudah memuat entri baru.</li>
                                </ol>
                                <div class="grid gap-4 md:grid-cols-3 mt-4">
                                    <div class="code-block">
                                        <h4>Route ke Cabang</h4>
                                        <pre><code><span id="code-route-lokasi1">/ip route add dst-address=192.168.113.0/24 gateway=wg-site2site distance=1 comment="to-Lokasi-Cabang-via-Wireguard"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-route-lokasi1')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Route Manajemen</h4>
                                        <pre><code><span id="code-route-wg-lokasi1">/ip route add dst-address=10.8.0.0/24 gateway=wg-site2site distance=1 comment="Wireguard-Management-Network"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-route-wg-lokasi1')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Verifikasi Routing</h4>
                                        <pre><code><span id="code-verify-route-lokasi1">/ip route print where gateway=wg-site2site</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-verify-route-lokasi1')">Salin</button>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 5: Firewall &amp; NAT</h3>
                                <p class="mb-3">Buka akses yang diperlukan sambil tetap menjaga rule existing.</p>
                                <div class="code-block">
                                    <h4>Rule Firewall Wireguard</h4>
                                    <pre><code><span id="code-firewall-lokasi1">/ip firewall filter add action=accept chain=forward connection-state=established,related comment="allow-established-related" place-before=0
/ip firewall filter add action=accept chain=forward in-interface=wg-site2site comment="allow-from-wireguard" place-before=0
/ip firewall filter add action=accept chain=forward out-interface=wg-site2site comment="allow-to-wireguard" place-before=0
/ip firewall filter add action=accept chain=input in-interface=wg-site2site comment="allow-wg-to-router" place-before=0
/ip firewall nat add action=accept chain=srcnat src-address=10.8.0.0/24 comment="bypass-nat-for-wireguard" place-before=0</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-firewall-lokasi1')">Salin</button>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 6: Testing Awal</h3>
                                <div class="code-block">
                                    <h4>Ping &amp; Status</h4>
                                    <pre><code><span id="code-test-lokasi1">/ping 10.8.0.1 count=5
/interface wireguard print</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-test-lokasi1')">Salin</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-content space-y-8" data-tab-content="lokasi2" id="tab-lokasi2">
                        <div class="space-y-6 text-gray-700">
                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 1: Backup &amp; Validasi Router Lokasi Kedua</h3>
                                <p class="mb-3">Ulangi prosedur backup sebelum melakukan perubahan di cabang.</p>
                                <div class="code-block">
                                    <h4>Backup Konfigurasi</h4>
                                    <pre><code><span id="code-backup-lokasi2">/export file=backup-pre-wireguard-lokasi2</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-backup-lokasi2')">Salin</button>
                                </div>
                                <div class="code-block mt-4">
                                    <h4>Verifikasi Sistem</h4>
                                    <pre><code><span id="code-verify-sistem-lokasi2">/system resource print
/interface print</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-verify-sistem-lokasi2')">Salin</button>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 2: Interface &amp; IP Wireguard</h3>
                                <ol class="list-decimal ml-6 space-y-2">
                                    <li>Gunakan private key dari <code>lokasi-cabang.conf</code> untuk membuat interface.</li>
                                    <li>Pasangkan alamat <code>10.8.0.4/24</code> ke interface Wireguard.</li>
                                </ol>
                                <div class="grid gap-4 md:grid-cols-3 mt-4">
                                    <div class="code-block">
                                        <h4>Tambah Interface</h4>
                                        <pre><code><span id="code-interface-lokasi2">/interface wireguard add listen-port=51820 mtu=1420 name=wg-site2site private-key="[PRIVATE_KEY_DARI_CONFIG_LOKASI_CABANG]"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-interface-lokasi2')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Assign IP</h4>
                                        <pre><code><span id="code-ip-lokasi2">/ip address add address=10.8.0.4/24 interface=wg-site2site comment="Wireguard-Site2Site-IP"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-ip-lokasi2')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Verifikasi</h4>
                                        <pre><code><span id="code-verify-interface-lokasi2">/interface wireguard print
/ip address print where interface=wg-site2site</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-verify-interface-lokasi2')">Salin</button>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 3: Peer &amp; Routing</h3>
                                <p class="mb-3">Sesuaikan endpoint sama seperti lokasi pertama, namun gunakan preshared key dari client cabang.</p>
                                <div class="code-block">
                                    <h4>Konfigurasi Peer</h4>
                                    <pre><code><span id="code-peer-lokasi2">/interface wireguard peers add allowed-address=0.0.0.0/0,::/0 endpoint-address=your-domain.com endpoint-port=51820 interface=wg-site2site public-key="[SERVER_PUBLIC_KEY]" preshared-key="[PRESHARED_KEY_LOKASI_CABANG]" persistent-keepalive=25s comment="VPS-Server"</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-peer-lokasi2')">Salin</button>
                                </div>
                                <div class="grid gap-4 md:grid-cols-2 mt-4">
                                    <div class="code-block">
                                        <h4>Routing ke Lokasi Utama</h4>
                                        <pre><code><span id="code-route-lokasi2">/ip route add dst-address=192.168.110.0/24 gateway=wg-site2site distance=1 comment="to-Lokasi-Utama-via-Wireguard"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-route-lokasi2')">Salin</button>
                                    </div>
                                    <div class="code-block">
                                        <h4>Routing Network Wireguard</h4>
                                        <pre><code><span id="code-route-wg-lokasi2">/ip route add dst-address=10.8.0.0/24 gateway=wg-site2site distance=1 comment="Wireguard-Management-Network"</span></code></pre>
                                        <button class="copy-btn" onclick="copyCode('code-route-wg-lokasi2')">Salin</button>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 4: Firewall &amp; NAT</h3>
                                <p class="mb-3">Gunakan rule identik seperti lokasi pertama untuk memastikan trafik dapat melewati terowongan.</p>
                                <div class="code-block">
                                    <h4>Rule Firewall Cabang</h4>
                                    <pre><code><span id="code-firewall-lokasi2">/ip firewall filter add action=accept chain=forward connection-state=established,related comment="allow-established-related" place-before=0
/ip firewall filter add action=accept chain=forward in-interface=wg-site2site comment="allow-from-wireguard" place-before=0
/ip firewall filter add action=accept chain=forward out-interface=wg-site2site comment="allow-to-wireguard" place-before=0
/ip firewall filter add action=accept chain=input in-interface=wg-site2site comment="allow-wg-to-router" place-before=0
/ip firewall nat add action=accept chain=srcnat src-address=10.8.0.0/24 comment="bypass-nat-for-wireguard" place-before=0</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-firewall-lokasi2')">Salin</button>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-xl font-semibold text-blue-600 mb-3">Langkah 5: Testing</h3>
                                <div class="code-block">
                                    <h4>Uji Konektivitas</h4>
                                    <pre><code><span id="code-test-lokasi2">/ping 10.8.0.1 count=5
/ping 10.8.0.2 count=5</span></code></pre>
                                    <button class="copy-btn" onclick="copyCode('code-test-lokasi2')">Salin</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring & Troubleshooting -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('troubleshooting')">
                <span class="font-bold text-blue-600">5. Testing, Monitoring & Troubleshooting</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-troubleshooting">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-troubleshooting">
                <p class="mb-4">Lakukan pengujian konektivitas secara menyeluruh dan pantau performa jaringan.</p>
                <div class="chart-container">
                    <h4 class="font-semibold mb-2 text-center">Simulasi Latensi VPN (ms)</h4>
                    <svg id="latency-chart"></svg>
                </div>
                <div class="mt-4 prose max-w-none">
                    <h3>Testing dan Verifikasi</h3>
                    <div class="code-block mb-4">
                        <h4>Test Konektivitas dari Mikrotik</h4>
                        <pre><code><span id="code-mikrotik-test">/ping 192.168.113.1 count=5
/tool traceroute address=192.168.113.1</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-mikrotik-test')">Salin</button>
                    </div>
                    <h3>Troubleshooting</h3>
                    <p>Jika Anda mengalami masalah, gunakan perintah diagnostik berikut:</p>
                    <div class="code-block mb-4">
                        <h4>Peer Tidak Terhubung ke VPS</h4>
                        <pre><code><span id="code-troubleshoot-1"># Di VPS
docker exec wg-easy wg show

# Di Mikrotik
/interface wireguard peers print detail</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-troubleshoot-1')">Salin</button>
                    </div>
                    <div class="code-block mb-4">
                        <h4>Ping ke VPS Berhasil tapi Site-to-Site Gagal</h4>
                        <pre><code><span id="code-troubleshoot-2"># Cek routing di VPS container
docker exec wg-easy ip route show</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-troubleshoot-2')">Salin</button>
                    </div>
                    <h3>Monitoring dan Maintenance</h3>
                    <p>Automasi monitoring adalah kunci untuk memastikan stabilitas. Gunakan skrip-skrip berikut untuk memantau status, bandwidth, dan latensi secara rutin. </p>
                    <div class="code-block mb-4">
                        <h4>Skrip Health Check Harian</h4>
                        <pre><code><span id="code-health-check">#!/bin/bash
# File: /opt/scripts/wg-healthcheck.sh
echo "=== Wireguard Health Check - $(date) ==="
if docker ps | grep -q wg-easy; then
    echo "✓ wg-easy container: RUNNING"
else
    echo "✗ wg-easy container: DOWN"
    exit 1
fi
echo -e "\n=== Connectivity Test ==="
if docker exec wg-easy ping -c 2 10.8.0.2 >/dev/null 2>&1; then
    echo "✓ Lokasi pertama: REACHABLE"
else
    echo "✗ Lokasi pertama: UNREACHABLE"
fi</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-health-check')">Salin</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Optimisasi dan Best Practices -->
        <div class="step-card">
            <div class="step-header" onclick="toggleSection('optimization')">
                <span class="font-bold text-blue-600">6. Optimisasi dan Best Practices</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 transform transition-transform duration-300 rotate-0" id="icon-optimization">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
            <div class="step-content" id="content-optimization">
                <p class="mb-4">Meningkatkan keamanan dan efisiensi untuk penggunaan produksi.</p>
                <div class="prose max-w-none">
                    <h3>Security Hardening</h3>
                    <div class="code-block mb-4">
                        <h4>Enhanced VPS Security</h4>
                        <pre><code><span id="code-security-hardening"># Ubah port SSH
sed -i 's/#Port 22/Port 2222/' /etc/ssh/sshd_config
# Nonaktifkan autentikasi password
sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
# Tambahkan jail fail2ban untuk Wireguard
# ... (kode lengkap di file asli)
systemctl restart sshd fail2ban</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-security-hardening')">Salin</button>
                    </div>
                    <h3>Scalability Planning</h3>
                    <p>Rencanakan alokasi IP untuk penambahan situs di masa depan. Gunakan skrip untuk mempermudah proses.</p>
                    <div class="code-block mb-4">
                        <h4>Skrip untuk Menambahkan Situs Baru</h4>
                        <pre><code><span id="code-add-site">#!/bin/bash
# File: /opt/scripts/add-new-site.sh
SITE_NAME=$1
SITE_IP=$2
SITE_SUBNET=$3
if [ $# -ne 3 ]; then
    echo "Usage: $0 &lt;site-name&gt; &lt;wireguard-ip&gt; &lt;local-subnet&gt;"
    exit 1
fi
echo "Adding new site: $SITE_NAME"
docker exec wg-easy ip route add $SITE_SUBNET via $SITE_IP</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-add-site')">Salin</button>
                    </div>
                    <h3>Integrasi dengan Infrastruktur Existing</h3>
                    <p>Pelajari cara mengintegrasikan Wireguard dengan Active Directory, logging terpusat, dan SNMP.</p>
                    <h3>Disaster Recovery Planning</h3>
                    <p>Siapkan prosedur pemulihan untuk skenario terburuk.</p>
                    <div class="code-block mb-4">
                        <h4>Skrip Pemulihan Bencana</h4>
                        <pre><code><span id="code-disaster-recovery">#!/bin/bash
# File: /opt/scripts/wg-recovery.sh
echo "=== Wireguard Disaster Recovery ==="
docker-compose -f /opt/wireguard/docker-compose.yml down
LATEST_BACKUP=$(ls -t /opt/backups/wireguard/wg-config-*.tar.gz | head -1)
echo "Restoring from: $LATEST_BACKUP"
tar -xzf $LATEST_BACKUP -C /
docker-compose -f /opt/wireguard/docker-compose.yml up -d</span></code></pre>
                        <button class="copy-btn" onclick="copyCode('code-disaster-recovery')">Salin</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer class="bg-gray-800 text-white text-center py-4 mt-8">
        <div class="container">
            <p class="text-sm">Tutorial dibuat menggunakan konten dari file `wireguard_site2site_tutorial.md`.</p>
        </div>
    </footer>

    <script>
        // Toggle sections
        function toggleSection(id) {
            const content = document.getElementById('content-' + id);
            const icon = document.getElementById('icon-' + id);
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.classList.remove('rotate-180');
            } else {
                content.classList.add('active');
                icon.classList.add('rotate-180');
            }
        }

        // Copy code to clipboard
        function copyCode(id) {
            const codeElement = document.getElementById(id);
            if (!codeElement) return;
            const code = codeElement.innerText;
            const textarea = document.createElement('textarea');
            textarea.value = code;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            const container = codeElement.closest('.code-block');
            const button = container ? container.querySelector('.copy-btn') : null;
            if (button) {
                const originalText = button.innerText;
                button.innerText = 'Tersalin!';
                setTimeout(() => {
                    button.innerText = originalText;
                }, 2000);
            }
        }

        // Tabs handling inside accordion panels
        function initTabs() {
            const tabGroups = document.querySelectorAll('.tab-group');
            tabGroups.forEach(group => {
                const buttons = group.querySelectorAll('.tab-button');
                const contents = group.querySelectorAll('.tab-content');

                buttons.forEach(button => {
                    button.addEventListener('click', () => {
                        const target = button.getAttribute('data-tab');

                        buttons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');

                        contents.forEach(content => {
                            if (content.getAttribute('data-tab-content') === target) {
                                content.classList.add('active');
                            } else {
                                content.classList.remove('active');
                            }
                        });
                    });
                });
            });
        }

        // D3.js chart for VPN comparison
        function createComparisonChart() {
            const data = [
                { name: 'Wireguard', performance: 90, simplicity: 95, security: 85 },
                { name: 'OpenVPN', performance: 65, simplicity: 60, security: 90 },
                { name: 'IPSec', performance: 75, simplicity: 40, security: 95 }
            ];

            const width = 700;
            const height = 250;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };
            
            const svg = d3.select("#vpn-comparison")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.name))
                .range([0, width])
                .padding(0.2);

            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).tickSize(0))
                .selectAll("text")
                .attr("transform", "translate(0,10)")
                .style("text-anchor", "middle")
                .style("font-size", "14px");
            
            const y = d3.scaleLinear()
                .domain([0, 100])
                .range([height, 0]);

            const yAxis = svg.append("g")
                .call(d3.axisLeft(y).ticks(5).tickSizeOuter(0));
            
            svg.selectAll(".bar-performance")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar-performance")
                .attr("x", d => x(d.name))
                .attr("y", d => y(d.performance))
                .attr("width", x.bandwidth() / 3)
                .attr("height", d => height - y(d.performance))
                .attr("fill", "#3b82f6")
                .attr("rx", 5)
                .attr("ry", 5);

            svg.selectAll(".bar-simplicity")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar-simplicity")
                .attr("x", d => x(d.name) + x.bandwidth() / 3)
                .attr("y", d => y(d.simplicity))
                .attr("width", x.bandwidth() / 3)
                .attr("height", d => height - y(d.simplicity))
                .attr("fill", "#60a5fa")
                .attr("rx", 5)
                .attr("ry", 5);

            svg.selectAll(".bar-security")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar-security")
                .attr("x", d => x(d.name) + (x.bandwidth() / 3) * 2)
                .attr("y", d => y(d.security))
                .attr("width", x.bandwidth() / 3)
                .attr("height", d => height - y(d.security))
                .attr("fill", "#93c5fd")
                .attr("rx", 5)
                .attr("ry", 5);

            svg.append("circle").attr("cx",width-180).attr("cy",0).attr("r", 6).style("fill", "#3b82f6")
            svg.append("circle").attr("cx",width-180).attr("cy",20).attr("r", 6).style("fill", "#60a5fa")
            svg.append("circle").attr("cx",width-180).attr("cy",40).attr("r", 6).style("fill", "#93c5fd")
            svg.append("text").attr("x", width-170).attr("y", 0).text("Performa").style("font-size", "15px").attr("alignment-baseline","middle")
            svg.append("text").attr("x", width-170).attr("y", 20).text("Kemudahan Konfigurasi").style("font-size", "15px").attr("alignment-baseline","middle")
            svg.append("text").attr("x", width-170).attr("y", 40).text("Keamanan").style("font-size", "15px").attr("alignment-baseline","middle")
        }

        // D3.js network topology
        function createNetworkTopology() {
            const links = [
                { source: "Internet A", target: "Mikrotik A" },
                { source: "Mikrotik A", target: "LAN A" },
                { source: "Internet B", target: "Mikrotik B" },
                { source: "Mikrotik B", target: "LAN B" },
                { source: "VPS Wireguard", target: "Internet A" },
                { source: "VPS Wireguard", target: "Internet B" }
            ];

            const nodes = [
                { id: "Internet A", type: "internet", fx: 150, fy: 50 },
                { id: "Mikrotik A", type: "router", fx: 150, fy: 200 },
                { id: "LAN A", type: "lan", fx: 150, fy: 350 },
                { id: "Internet B", type: "internet", fx: 650, fy: 50 },
                { id: "Mikrotik B", type: "router", fx: 650, fy: 200 },
                { id: "LAN B", type: "lan", fx: 650, fy: 350 },
                { id: "VPS Wireguard", type: "vps", fx: 400, fy: 200 }
            ];

            const svg = d3.select("#network-topology");
            const width = +svg.attr("viewBox").split(" ")[2];
            const height = +svg.attr("viewBox").split(" ")[3];

            const simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(100))
                .force("charge", d3.forceManyBody().strength(-200))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .stop();

            for (let i = 0; i < 300; ++i) simulation.tick();

            const link = svg.append("g")
                .attr("stroke", "#999")
                .attr("stroke-opacity", 0.6)
                .selectAll("line")
                .data(links)
                .join("line")
                .attr("stroke-width", 2)
                .attr("stroke", d => d.source.id === "VPS Wireguard" || d.target.id === "VPS Wireguard" ? "#10b981" : "#999");
            
            const node = svg.append("g")
                .attr("stroke", "#fff")
                .attr("stroke-width", 1.5)
                .selectAll("g")
                .data(nodes)
                .join("g");

            node.append("circle")
                .attr("r", 20)
                .attr("fill", d => {
                    if (d.type === "router") return "#3b82f6";
                    if (d.type === "vps") return "#ef4444";
                    return "#6b7280";
                });
            
            node.append("text")
                .attr("dy", "0.31em")
                .attr("x", 25)
                .text(d => d.id)
                .style("font-size", "14px")
                .style("fill", "#1f2937");

            function ticked() {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);
                node
                    .attr("transform", d => `translate(${d.x},${d.y})`);
            }
            simulation.on("tick", ticked);
            ticked(); // Initial render
        }

        // D3.js latency chart
        function createLatencyChart() {
            const data = [
                { label: 'Direct', min: 10, avg: 50, max: 80 },
                { label: 'VPN Tunneled', min: 100, avg: 180, max: 300 }
            ];
            
            const width = 600;
            const height = 250;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };

            const svg = d3.select("#latency-chart")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            const x = d3.scaleBand()
                .domain(data.map(d => d.label))
                .range([0, width])
                .padding(0.4);

            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).tickSize(0));
            
            const y = d3.scaleLinear()
                .domain([0, 400])
                .range([height, 0]);

            const yAxis = svg.append("g")
                .call(d3.axisLeft(y).ticks(5).tickSizeOuter(0));

            const colors = {
                min: "#10b981",
                avg: "#f59e0b",
                max: "#ef4444"
            };

            const barWidth = x.bandwidth() / 3;

            // Min latency bars
            svg.selectAll(".bar-min")
                .data(data)
                .enter().append("rect")
                .attr("x", d => x(d.label))
                .attr("y", d => y(d.min))
                .attr("width", barWidth)
                .attr("height", d => height - y(d.min))
                .attr("fill", colors.min);

            // Avg latency bars
            svg.selectAll(".bar-avg")
                .data(data)
                .enter().append("rect")
                .attr("x", d => x(d.label) + barWidth)
                .attr("y", d => y(d.avg))
                .attr("width", barWidth)
                .attr("height", d => height - y(d.avg))
                .attr("fill", colors.avg);

            // Max latency bars
            svg.selectAll(".bar-max")
                .data(data)
                .enter().append("rect")
                .attr("x", d => x(d.label) + 2 * barWidth)
                .attr("y", d => y(d.max))
                .attr("width", barWidth)
                .attr("height", d => height - y(d.max))
                .attr("fill", colors.max);

            svg.append("circle").attr("cx",width-180).attr("cy",0).attr("r", 6).style("fill", colors.min)
            svg.append("circle").attr("cx",width-180).attr("cy",20).attr("r", 6).style("fill", colors.avg)
            svg.append("circle").attr("cx",width-180).attr("cy",40).attr("r", 6).style("fill", colors.max)
            svg.append("text").attr("x", width-170).attr("y", 0).text("Minimum").style("font-size", "15px").attr("alignment-baseline","middle")
            svg.append("text").attr("x", width-170).attr("y", 20).text("Rata-rata").style("font-size", "15px").attr("alignment-baseline","middle")
            svg.append("text").attr("x", width-170).attr("y", 40).text("Maksimum").style("font-size", "15px").attr("alignment-baseline","middle")
        }
        
        // Initial setup on window load
        window.onload = function() {
            initTabs();
            createComparisonChart();
            createNetworkTopology();
            createLatencyChart();
        }
    </script>
</body>
</html>
